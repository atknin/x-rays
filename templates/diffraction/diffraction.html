{% extends "general/index.html" %}
  {% block title %}
  <title>Дифракция</title>
  {% load static %}
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="{% static "konva/konva.min.js"%}" ></script>
  <script src="{% static "fabric/fabric.min.js"%}" ></script>



  <link href="{% static "diffraction/css.css" %}" rel="stylesheet">
  <style type="text/css">
    .loader { 
      background-image: url('http://smallenvelop.com/wp-content/uploads/2014/08/Preloader_8.gif');
      background-repeat: no-repeat;
      background-position: 50% 50%; 
      background-size: 20px 80%;
      color: transparent;
      background-color: transparent;
    }

    .settings{
      margin-top: 30px;
      margin: 20px;

    }
 

    .panels{
        margin-top: 30px;
        margin-left: 5px;
        border: 1px solid #eee;
    }
    .error {
        border-color: #d9534f !important;
      }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        /* display: none; <- Crashes Chrome on hover */
        -webkit-appearance: none;
        margin: 0; /* <-- Apparently some margin are still there even though it's hidden */
    }
  </style>
  
  {% endblock %}
    
  {% block content %}
    <input type='hidden' name='csrfmiddlewaretoken' value='Sdgrw2HfynbFgPcZ5sjaoAI5zsMZ4wZR' />
    <div class="row" style="margin-top: 50px;" id = "div_choose_howmanycrystals">
      <div class="btn-group btn-group-justified" role="group" aria-label="..." >
        <div class="btn-group" role="group">
          <button type="button" id = 'btn_0_cryst' class="btn btn-default">без кристаллов</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" disabled>1 кристалл</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" disabled>2 кристалла</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" disabled>3 кристалла</button>
        </div>
      </div>
    </div>

   <!-- Без кристаллов -->
    <div class="row" style="background-color: #FAFAFA; height: 360px; margin-top: 40px; display: none;" id = "div_zero_crystal">
      
      <div class="col-md-7" style="margin-left: 20px;">
        <canvas class = 'panels' width=800 height=300 id="fabric"></canvas>
        
        <div style="display: none;">
          <img src="{% static 'diffraction/img/detector.png' %}" id="detector" >
          <img src="{% static 'diffraction/img/source.png' %}" id="source">
          <img src="{% static 'diffraction/img/sample.png' %}" id="sample" >
          <img src="{% static 'diffraction/img/slit.png' %}" id="slit" >
        </div>

      </div>
      
      <div class="col-md-4" style="margin-left: 20px;">
        <div class="panels" style="height: 300px; background-color: white;">

<!-- ИСТОЧНИК -->
          <div class="row settings" id="div_settings_source">  
            <span class="label label-primary">Параметры источника</span>
              <div class="form-group">
                <label>Анод:</label>
                <select class="form-control" name = 'Источник'  id ='source_to_backend' size="6">
                {%for source in anod%}
                  <option value="{{source.wavelength.all.0.wavelength }}"><small>{{source.name}}</small></option>
                {% endfor %}
                </select> 
              </div>
              <div class="form-group">
                <label>Полуширина излучающего пятная, расходимость источника</label>
                <div class="col-md-6 ">
                  <div class="input-group ">
                    <input class="form-control" type="number" name = 'Расходимость источника' value = 0.5 id="source_divergence_mmetr" disabled>
                  <div class="input-group-addon">mm</div>
                  </div>
                </div>
                <div class="col-md-6">
                <div class="input-group">
                  <input class="form-control" type="number" name = 'Расходимость источника' value="600" id="source_divergence_arc" >
                  <div class="input-group-addon">arcsec</div>
                  </div>
                </div>
              </div>
            </div>
<!-- // ИСТОЧНИК -->
<!-- ЩЕЛЬ 1 -->
            <div class="row settings" id="div_settings_slit_1">
              <span class="label label-primary">Параметры щели №1</span>
              <div class="form-group">
                <label>расстояние до источника</label>
                  <div class="input-group ">
                    <input class="form-control" type="number" name = 'Первая щель. Положение' value = 0.54 id="input_l_slit1">
                  <div class="input-group-addon">m</div>
                  </div>
                </div>
                <div class="form-group">
                <label>Размер щели</label>
                  <div class="input-group ">
                    <input class="form-control" type="number" name = 'Первая щель. Ширина' value = 0.02 id="input_size_slit1">
                  <div class="input-group-addon">mm</div>
                  </div>
                </div>
            </div>
<!-- // ЩЕЛЬ 1 -->

<!-- ЩЕЛЬ 2 -->
            <div class="row settings" id="div_settings_slit_2">
              <span class="label label-primary">Параметры щели №2</span>
              <div class="form-group">
                <label>расстояние до источника</label>
                  <div class="input-group ">
                    <input class="form-control" type="number" name = 'Вторая щель. Положение' value = 0.99 id="input_l_slit2">
                  <div class="input-group-addon">m</div>
                  </div>
                </div>
                <div class="form-group">
                <label>Размер щели</label>
                  <div class="input-group ">
                    <input class="form-control" type="number" name = 'Вторая щель. Ширина' value = 0.02 id="input_size_slit2">
                  <div class="input-group-addon">mm</div>
                  </div>
                </div>
            </div>
<!-- // ЩЕЛЬ 2 -->
 <!-- настроить детектор -->
              <div class="row settings" id="div_settings_detector" >
                <div style="margin-bottom: 20px"><span class="label label-primary">Параметры детектора</span></div>
                отсутсвуют
              </div>
<!-- / настроить детектор -->
          <p class="lead" id = 'sign_settings' style="margin: 30px;" >НАСТРОЙКА</p> 

        </div>
      </div>

    </div>
    <div class="row">
      <hr>
      <div class="col-md-4">
        <div class="row" >
          <div class="alert alert-danger" style="margin-left: 40px;"  role="alert" id='id_alert_message'>
            
          </div>
        </div>
        <button type="button" style="margin: 40px;" id = "compute" class="btn btn-success" disabled>Расчитать</button>
      </div>

      <div class="col-md-8"></div>

    </div>
    



    <!-- Без кристаллов скрипт-->
    <script src="{% static "diffraction/js/zero_crystal.js"%}" ></script>

{% endblock %}