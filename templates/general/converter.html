{% extends "general/index.html" %}
  {% block title %}
  <title>Об авторах &#967; </title>
  {% load static %}
      
    <style>

    </style>

  {% endblock %}
  {% block content %}

  <div class="row" style=" background-color: #eee; height: 145px;" >
    <div class="input-group" style="margin: 50px;">
      <div class="input-group-btn">
        <label class="btn btn-default btn-file">
            <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span>
            <input type="file" multiple id="geomInputFile" style="display: none;">
        </label>
      </div>
      <input type="text" style="width: 200px;" class="form-control" id = 'file_name' aria-label="...">
    </div>
  </div>
  <div class="row" style="margin-top: 50px;">
    <div class="col-md-4">
      
    </div>
    <div class="col-md-4" id = 'text_for_x_y' >
      <!-- <textarea class="form-control" rows="10" id = "text_area_geometry">
      </textarea> -->
    </div>
    <div class="col-md-4">
      
    </div>

  </div>
  
    

<script type="text/javascript">
    var num = 0;
    var name = {}
    $(document).ready(function(){
      $('#geomInputFile').on('change', function(e){
          for (var i = 0; i < this.files.length; i++) {
              name['nm'+(i+1)] = this.files[i].name;
              readFile(this.files[i], function(e) {
                // use result in callback...
              ok(e.target);
            });
          };
          
      });
    });


    function ok(text){
      num++;
      $( "#text_for_x_y" ).append( "<textarea class='form-control' id = 'num_scan_"+num+"' rows='10'></textarea><hr>" );
      $( '#num_scan_'+num).val(text.result);
      console.log(name['nm'+num]);
    };

    function readFile(file, onLoadCallback){
      var reader = new FileReader();
      reader.onload = onLoadCallback;
      reader.readAsText(file);
    };
</script>
  {% endblock %}