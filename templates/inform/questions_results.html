<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    {%load static%}
    <!-- {% load mytag %} -->
    <link rel="icon" href="{% static "icon/informata.png" %}">

    <title>ИНФО СМУ</title>
    <!-- Bootstrap core CSS -->
    <link href="{% static "bootstrap_4/css/bootstrap.min.css" %}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{% static "bootstrap_4/dist/signin.css" %}" rel="stylesheet">
    <script src="{% static "bootstrap/js/jquery-3.1.1.min.js"%}"></script>
    <script src="{% static "bootstrap_4/js/jquery.maskedinput.js"%}"></script>
    <script src="{% static "graph/plotly/plotly-latest.min.js"%}" ></script>
    <style media="screen">
      #load{
        background-color: black;
        margin-top: -40px;
        margin-bottom: -40px;
        width: 100%;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div class="container" id="main">


        <div class="card card-inverse" style="background-color: #333; border-color: #333; margin-bottom:20px;">
          <div class="card-block">
            <h3 class="card-title">Результаты на сегодня</h3>
          </div>
        </div>
        {%for akey, avalues in results.items%}
        <div class="card card-outline-primary mb-3">
          <div class="card-block">
            <blockquote class="card-blockquote">
              <fieldset class="form-group row">
                <label for="inputLastName">{{akey.text}}</label>
                <hr>

                {%if akey.types.text == "number"%}
                  Среднее: {{avalues.result|div:avalues.N}}
                {%else%}
                  <div class="row">
                    <div class="col-2">

                    </div>
                    <div class="col-8">
                      <div id="myDiv{{akey.id}}">
                        {%for nameresult, resultvalue in avalues.items%}
                          <input type="text" name="{{nameresult.text}}" value="{{resultvalue}}" style='display:none;'>
                        {%endfor%}
                      </div>
                    </div>
                    <div class="col-2">

                    </div>
                  </div>
                  <script type="text/javascript">
                    var elements = $('#myDiv{{akey.id}}').children();
                    $('#myDiv{{akey.id}}').children().each(function(i) {
                        console.log($(this).attr('name'));
                        console.log($(this).val());
                        console.log('-----');
                    });

                  var data = [
                      {
                        x: ['giraffes', 'orangutans', 'monkeys'],
                        y: [20, 14, 23],
                        type: 'bar'
                      }
                    ];
                    var layout = {
                      title: 'Результат',
                      // bgcolorsrc: 'rgb(238, 238, 238)',
                      // xaxis: {
                      //   title: 'deviation from the Bragg angle',
                      //   titlefont: {
                      //     family: 'Courier New, monospace',
                      //     size: 18,
                      //     color: '#7f7f7f'
                      //   }
                      // },
                      // yaxis: {
                      //   title: '|R|',
                      //   titlefont: {
                      //     family: 'Courier New, monospace',
                      //     size: 18,
                      //     color: '#7f7f7f'
                      //   }
                      // }
                    };

                    Plotly.newPlot('myDiv{{akey.id}}', data,layout);
                  </script>
                {%endif%}
                <!-- {%if question.types.text == "number"%}
                <div class="col-5">
                  <input type="number" class="form-control" id="" name = "voprosnum_{{question.id}}">
                </div>
                {%else%}
                    {%for variant in question.choose.all%}
                      <label class="form-check-label">
                       <input class="form-check-input" type="radio" name="vopros_{{question.id}}" value="otvet_{{variant.id}}">
                     {{variant.text}}
                     </label>
                    {%endfor%}
                {%endif%} -->
              </fieldset>
            </blockquote>
          </div>
        </div>
        {%endfor%}

    </div> <!-- /container -->

  </body>
</html>
